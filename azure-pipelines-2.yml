# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: windows-11


stages:
  - stage: 
    jobs:
      -  deployment: VMDeploy
         displayName: web
         environment:
          name: sudhaka-VM123
          #resourceName: sudhaka-VM123
          resourceType: VirtualMachine
         strategy:
          rolling:
             deploy:
              steps:
               - task: DownloadBuildArtifacts@1
                 displayName: 'Download Build Artifacts'
                 inputs:
                   artifactName: warfile
                   itemPattern: '**/*.war'
                   extractTars: false
               -  task: CopyFilesOverSSH@0
                  inputs:
                     sshEndpoint: JAVAVM-CONNECTION
                     sourceFolder: '$(System.DefaultWorkingDirectory)/**/*.war'
                     contents: '**/*.war'
                     targetFolder: /opt/tomcat/webapps
                     readyTimeout: 20000
      

                    
                    
                      
                      
                      
                    
  
                    
                        
                                                                                
                    

                      
      
