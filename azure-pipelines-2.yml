# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: windows-11

stages:
  - stage: 
    jobs:
      -  deployment: VMDeploy
         displayName: web
         environment:
          name: Ubuntudeploy
          resourceType: VirtualMachine
         strategy:
          rolling:
             deploy:
              steps:
                - task: DownloadBuildArtifacts@1
                  inputs:
                     buildType: current
                     downloadType: single
                     artifactName: warfile
                     itemPattern: '**/*.war'
                     downloadPath: '$(System.ArtifactsDirectory)'
                - task: CopyFilesOverSSH@0
                  inputs:
                     sshEndpoint: JAVAVM-CONNECTION
                     sourceFolder: $(System.ArtifactsDirectory)
                     contents: '**/*.war'
                     targetFolder: /opt/tomcat/webapps
                     readyTimeout: 20000


                    
                    
                      
                      
                      
                    
  
                    
                        
                                                                                
                    

                      
      
